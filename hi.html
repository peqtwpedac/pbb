<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sign Ordinance Compliance Calculator</title>
<style>
    body {
        font-family: system-ui, sans-serif;
        background: #ffffff;
        color: #333333;
        padding: 30px;
        max-width: 900px;
        margin: auto;
    }

    .box {
        background: #f5f5f5;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
        border: 1px solid #cccccc;
    }

    input, select {
        width: 100%;
        padding: 8px;
        margin-top: 4px;
        border-radius: 6px;
        border: 1px solid #cccccc;
        background: #ffffff;
        color: #333333;
    }

    button {
        margin-top: 20px;
        padding: 12px;
        width: 100%;
        font-size: 16px;
        border-radius: 8px;
        border: none;
        background: #0072c6;
        color: #ffffff;
        cursor: pointer;
    }
    button:hover {
        background: #005bb5;
    }

    .result {
        padding: 15px;
        border-radius: 8px;
        margin-top: 20px;
        font-weight: bold;
        color: #ffffff;
    }
    .allowed {
        background: #2c7a7b;
    }
    .denied {
        background: #a31f34;
    }

    ul {
        margin-top: 10px;
        font-weight: normal;
    }

    .town-header {
        width: 100%;
        background: #ffffff;
        border-bottom: 1px solid #d1d1d1;
        margin-bottom: 25px;
    }

    .town-header-inner {
        max-width: 1100px;
        margin: 0 auto;
        padding: 12px 20px;
        display: flex;
        align-items: center;
    }

    .town-logo {
        height: 60px;
        width: auto;
    }

</style>
</head>

<body>
    <header class="town-header">
        <div class="town-header-inner">
            <img 
                src="https://github.com/peqtwpedac/pbb/blob/caderam/PequannockLogo.png?raw=true"
                alt="Pequannock Township Logo"
                class="town-logo"
            >
        </div>
    </header>
<h1>Sign Ordinance Compliance Calculator</h1>
<p>Enter your zoning district, building size, and sign details to see if your sign is permitted.</p>

<div class="box">
    <label>Zoning District</label>
    <select id="zone">
        <option value="residential">Residential</option>
        <option value="c1">C-1 / CBD-1 / CBD-2</option>
        <option value="c2">C-2 / C-3 / C-4</option>
        <option value="industrial">Industrial</option>
        <option value="institutional">Institutional</option>
    </select>

    <label>Sign Type</label>
    <select id="signType">
        <option value="freestanding">Freestanding</option>
        <option value="attached">Attached / Awning</option>
        <option value="projecting">Projecting</option>
        <option value="menu">Menu Board</option>
        <option value="nameplate">Nameplate (Residential)</option>
    </select>

    <label>Storefront / Facade Area (sq ft)</label>
    <input type="number" id="facade" value="0">

    <label>Proposed Sign Area (sq ft)</label>
    <input type="number" id="area">

    <label>Sign Height (feet)</label>
    <input type="number" id="height">

    <label>Setback from Property Line / ROW (feet)</label>
    <input type="number" id="setback">

    <label>Illuminated?</label>
    <select id="lighting">
        <option value="no">No</option>
        <option value="yes">Yes</option>
    </select>

    <label>Illuminated After Restricted Hours?</label>
    <select id="lateLighting">
        <option value="no">No</option>
        <option value="yes">Yes</option>
    </select>

    <button onclick="checkSign()">Check Compliance</button>
</div>

<div id="output"></div>

<script>
function checkSign() {
    const zone = document.getElementById("zone").value;
    const type = document.getElementById("signType").value;
    const facade = parseFloat(document.getElementById("facade").value) || 0;
    const area = parseFloat(document.getElementById("area").value) || 0;
    const height = parseFloat(document.getElementById("height").value) || 0;
    const setback = parseFloat(document.getElementById("setback").value) || 0;
    const lighting = document.getElementById("lighting").value;
    const late = document.getElementById("lateLighting").value;

    let allowed = true;
    let reasons = [];
    let maxArea = Infinity;

    /* ---- RESIDENTIAL ---- */
    if (zone === "residential") {
        if (type === "nameplate") maxArea = 2;
        else {
            allowed = false;
            reasons.push("Only nameplate, home occupation, or approved professional signs are allowed in residential zones.");
        }
        if (area > maxArea) reasons.push("Exceeds maximum allowed area of " + maxArea + " sq ft.");
        if (height > 3) reasons.push("Residential signs may not exceed 3 feet in height.");
        if (setback < 10) reasons.push("Sign must be at least 10 feet from property lines.");
        if (lighting === "yes") reasons.push("Residential signs may not be internally illuminated.");
    }

    /* ---- C-1 / CBD ---- */
    if (zone === "c1") {
        if (type === "freestanding") maxArea = 15;
        if (type === "attached") maxArea = 24;
        if (type === "projecting") maxArea = 6;
        if (type === "menu") maxArea = 4;

        if (area > maxArea) reasons.push("Exceeds maximum sign area of " + maxArea + " sq ft.");
        if (type === "freestanding" && height > 9) reasons.push("Freestanding signs may not exceed 9 feet in height.");
        if (setback < 5) reasons.push("Freestanding signs must be at least 5 feet from right-of-way.");
        if (late === "yes") reasons.push("Signs may not be illuminated between 11 PM and 6 AM.");
    }

    /* ---- C-2 / C-3 / C-4 ---- */
    if (zone === "c2") {
        if (type === "freestanding") {
            maxArea = 100;
            if (height > 24) reasons.push("Freestanding signs may not exceed 24 feet in height.");
            if (setback < 10) reasons.push("Freestanding signs must be set back at least 10 feet.");
        }

        if (type === "attached") {
            if (facade <= 600) maxArea = 40;
            else if (facade <= 1000) maxArea = 50;
            else if (facade <= 2000) maxArea = Math.max(50, facade * 0.05);
            else if (facade <= 4000) maxArea = Math.max(100, facade * 0.04);
            else if (facade <= 6000) maxArea = Math.max(160, facade * 0.035);
            else maxArea = 210;
        }

        if (area > maxArea) reasons.push("Exceeds allowed sign area of " + Math.round(maxArea) + " sq ft.");
    }

    /* ---- INDUSTRIAL ---- */
    if (zone === "industrial") {
        maxArea = 40;
        if (area > maxArea) reasons.push("Industrial signs may not exceed 40 sq ft.");
        if (setback < 10) reasons.push("Industrial signs must be at least 10 feet from property lines.");
        if (late === "yes") reasons.push("Industrial signs may not be illuminated between 10 PM and 7 AM.");
    }

    /* ---- INSTITUTIONAL ---- */
    if (zone === "institutional") {
        if (type === "freestanding") {
            maxArea = 20;
            if (height > 8) reasons.push("Freestanding institutional signs may not exceed 8 feet.");
            if (setback < 20) reasons.push("Must be 20 feet from property lines.");
        }
        if (type === "attached") {
            maxArea = facade * 0.01;
            if (height > 14) reasons.push("Attached signs may not exceed 14 feet in height.");
        }
        if (area > maxArea) reasons.push("Exceeds maximum permitted sign area.");
        if (late === "yes") reasons.push("Institutional signs may not be illuminated between 10 PM and 7 AM.");
    }

    if (reasons.length > 0) allowed = false;

    const out = document.getElementById("output");
    out.innerHTML = `
        <div class="result ${allowed ? "allowed" : "denied"}">
            ${allowed ? "✔ SIGN IS PERMITTED" : "✖ SIGN IS NOT PERMITTED"}
            ${reasons.length ? "<ul>" + reasons.map(r => `<li>${r}</li>`).join("") + "</ul>" : ""}
        </div>
    `;
}
</script>

</body>
</html>
